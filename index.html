<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ€ç»´å†’é™©è€… Â· MindVoyager</title>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- ===== å…¨ç«™å“ç‰Œæ ·å¼ï¼ˆé£æ ¼ Bï¼‰ ===== -->
<style>

:root {
    --green-main: #22c55e;
    --green-deep: #14532d;
    --green-soft: #bbf7d0;
    --yellow-soft: #fef9c3;
    --text-main: #0f172a;
    --text-sub: #475569;

    --card-shadow: 0 12px 40px rgba(0,0,0,0.08);
    --radius: 20px;
    --glass-bg: rgba(255,255,255,0.55);
}

/* é¡µèƒŒæ™¯ */
body {
    margin: 0;
    font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
    background: linear-gradient(145deg, #e3ffe6, #fef9c3);
    min-height: 100vh;
}

/* é¡¶éƒ¨ LOGO æ  */
header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 18px 0;
    background: var(--green-deep);
    box-shadow: 0 2px 6px rgba(0,0,0,0.18);
}
header img {
    height: 48px;
}
header span {
    color: white;
    font-size: 20px;
    font-weight: bold;
}

/* å®¹å™¨ */
.container {
    max-width: 760px;
    margin: 0 auto;
    padding: 20px;
}

/* ç»ç’ƒå¡ç‰‡ */
.card {
    background: var(--glass-bg);
    backdrop-filter: blur(16px);
    padding: 26px;
    border-radius: var(--radius);
    box-shadow: var(--card-shadow);
    margin-bottom: 28px;
    border: 1px solid rgba(255,255,255,0.6);
    position: relative;
}
.card::after {
    content: "ğŸ¸";
    position: absolute;
    top: 12px;
    right: 20px;
    font-size: 20px;
}

/* æ ‡é¢˜ */
.section-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-main);
    margin-bottom: 12px;
}

/* æŒ‰é’® */
button {
    background: var(--green-main);
    border: none;
    padding: 12px 18px;
    border-radius: 12px;
    font-size: 15px;
    color: white;
    cursor: pointer;
    transition: 0.2s;
}
button:hover { background: #16a34a; }

/* è¾“å…¥æ¡† */
textarea {
    width: 100%;
    padding: 12px;
    border-radius: 14px;
    border: 1px solid #cbd5e1;
    font-size: 15px;
    background: white;
    box-sizing: border-box;
    margin-top: 10px;
    min-height:130px;
}
select {
    width: 100%;
    padding: 10px;
    border-radius: 12px;
    font-size: 15px;
    border: 1px solid #cbd5e1;
    margin-bottom: 10px;
}

/* HERO å¤§å›¾ + å±…ä¸­æ ‡é¢˜ */
.hero {
    text-align:center;
    padding: 60px 20px 40px;
}
.hero img {
    width: 180px;
    border-radius: 20px;
    margin-bottom: 18px;
}
.hero-title {
    font-size: 28px;
    font-weight: 700;
    color: var(--green-deep);
}
.hero-sub {
    font-size: 16px;
    color: var(--text-main);
    margin-top: 10px;
    line-height: 1.8;
}

</style>
</head>
<body>

<!-- ===========================
     ğŸ¸ é¡¶éƒ¨ LOGO Header
     =========================== -->
<header>
    <img src="brand-frog-logo.png" alt="logo">
    <span>æ€ç»´å†’é™©è€… Â· MindVoyager</span>
</header>


<!-- ===========================
     ğŸŒŒ å“ç‰Œå°é¢ HEROï¼ˆé£æ ¼ Bï¼šå¤§å›¾ï¼‹å±…ä¸­ï¼‰
     =========================== -->
<div class="hero">

    <!-- ===========================
     ğŸŒŒ å“ç‰Œå°é¢ HEROï¼ˆé£æ ¼ Bï¼‰
     =========================== -->
<div class="hero">

    <!-- ä½¿ç”¨ä½ ä¸Šä¼ çš„è›¤èŸ†å›¾ç‰‡ -->
    <img src="æ€è€ƒçš„è›¤èŸ†.png" alt="æ²‰æ€è›¤èŸ† Brand Hero">

    <div class="hero-title">æ€ç»´å†’é™©è€… Â· MindVoyager</div>

    <div class="hero-sub">
        æ¬¢è¿å›åˆ°ä½ çš„æ€ç»´å®‡å®™ã€‚<br>
        æ¯ä¸€æ¬¡æ€è€ƒï¼Œéƒ½æ˜¯ä¸€æ¬¡æ—…è¡Œã€‚<br>
        ä½ çš„å¤§è„‘æ¯”ä½ æƒ³è±¡çš„è¾½é˜”ã€‚<br>
        è®°å½•ï¼Œæ˜¯æ¢ç´¢è‡ªå·±çš„ç¬¬ä¸€æ­¥ã€‚<br>
    </div>

</div>

    <div class="hero-title">æ€ç»´å†’é™©è€… Â· MindVoyager</div>

    <div class="hero-sub">
        æ¬¢è¿å›åˆ°ä½ çš„æ€ç»´å®‡å®™ã€‚<br>
        æ¯ä¸€æ¬¡æ€è€ƒï¼Œéƒ½æ˜¯ä¸€æ¬¡æ—…è¡Œã€‚<br>
        ä½ çš„å¤§è„‘æ¯”ä½ æƒ³è±¡çš„è¾½é˜”ã€‚<br>
        è®°å½•ï¼Œæ˜¯æ¢ç´¢è‡ªå·±çš„ç¬¬ä¸€æ­¥ã€‚<br>
    </div>

</div>
<!-- ===========================
     ğŸŒŒ æ€ç»´æ˜Ÿå›¾å…¥å£ï¼ˆå“ç‰Œç‰ˆï¼‰
     =========================== -->
<div class="container">
  <div class="card" style="border-left:6px solid var(--green-main);">

      <div class="section-title">ğŸŒŒ æˆ‘çš„æ€ç»´æ˜Ÿå›¾</div>

      <p style="font-size:14px; color:var(--text-sub); line-height:1.7; margin-top:-4px;">
          è¿™æ˜¯å±äºä½ çš„ <b>æ€ç»´å®‡å®™åœ°å›¾</b>ã€‚<br>
          ç³»ç»Ÿä¼šæ ¹æ®ä½ å†™ä¸‹çš„å†…å®¹è‡ªåŠ¨ç”Ÿæˆã€Œå…³é”®è¯æ˜Ÿå›¾ã€ã€‚<br><br>

          ğŸŸ¢ èŠ‚ç‚¹è¶Šå¤§ â†’ å®ƒè¶Šå¸¸å‡ºç°åœ¨ä½ çš„æ€è€ƒä¸­<br>
          ğŸŸ¢ èŠ‚ç‚¹è¶Šè¿‘ â†’ å®ƒä»¬è¶Šå¸¸ä¸€èµ·å‡ºç°<br>
          ğŸŸ¢ è¿çº¿ â†’ å®ƒä»¬æ˜¯ä½ çš„æ€ç»´é€»è¾‘è·¯å¾„<br><br>

          ç‚¹å‡»è¿›å…¥ï¼Œæ¢ç´¢ä½ å¤§è„‘çš„æ˜Ÿè¾°ä½“ç³» ğŸ¸ğŸŒŒ
      </p>

      <button 
          onclick="window.location.href='mind-map.html'" 
          style="margin-top:14px; background:var(--green-main); border-radius:14px; padding:12px 18px;">
          âœ¨ è¿›å…¥æˆ‘çš„æ€ç»´å®‡å®™
      </button>

  </div>
</div>
<!-- ===========================
     ğŸ§¬ ç­‰çº§ç³»ç»Ÿï¼ˆå“ç‰Œç‰ˆï¼‰
     =========================== -->
<div class="container">
<div id="level-card"
     style="background:white; border-radius:var(--radius); padding:24px; box-shadow:var(--card-shadow);">

    <div style="font-size:18px; font-weight:600; color:var(--green-deep); margin-bottom:10px;">
        å½“å‰ç­‰çº§
    </div>

    <div id="level-title" style="font-size:16px; color:var(--text-main); margin-bottom:8px;">
        ç­‰çº§ï¼šåŠ è½½ä¸­...
    </div>

    <!-- è¿›åº¦æ¡å¤–æ¡† -->
    <div style="background:#e0f2e9; height:12px; border-radius:6px; margin:12px 0;">
        <div id="progress-bar"
             style="height:12px; width:0%; background:linear-gradient(90deg,#4ade80,#16a34a); border-radius:6px;">
        </div>
    </div>

    <div id="level-exp-text" style="font-size:14px; color:var(--text-sub); margin-bottom:6px;">
        ç§¯åˆ†ï¼š0
    </div>

    <div id="percentile-text" style="font-size:14px; color:var(--text-sub);">
        ä½ è¶…è¿‡äº†å…¨çƒ 0% çš„äººç±»
    </div>

</div>
</div>
<!-- ===========================
     ğŸ´ æŠ½å¡è®­ç»ƒï¼ˆå“ç‰Œæ°´å½©ç¿»ç‰Œç‰ˆï¼‰
     =========================== -->
<div class="container">
  <div class="card">

    <div class="section-title">â‘  æŠ½å–ä»Šæ—¥æ€ç»´å…ƒç´ å¡</div>

    <button onclick="drawElementCard()">æŠ½å…ƒç´ å¡</button>

    <!-- ç¿»ç‰Œå®¹å™¨ -->
    <div class="flip-card" id="elementFlip">
      <div class="flip-card-inner">

        <!-- å¡èƒŒï¼ˆåˆå§‹æ˜¾ç¤ºï¼‰ -->
        <div class="flip-front">
          ğŸ¸ ç‚¹å‡»â€œæŠ½å…ƒç´ å¡â€ï¼Œçœ‹çœ‹ä»Šå¤©çš„æ€ç»´æç¤º
        </div>

        <!-- å¡é¢ï¼ˆæŠ½å¡åæ˜¾ç¤ºï¼‰ -->
        <div class="flip-back">
          <p id="elementCard" style="white-space:pre-wrap; margin:0;"></p>
        </div>

      </div>
    </div>

    <!-- ç”¨æˆ·å›ç­” -->
    <textarea id="elementAnswer"
              placeholder="åœ¨è¿™é‡Œå†™ä¸‹ä½ çš„å›åº”ã€æƒ³æ³•æˆ–ä½ çš„æ€ç»´è¿‡ç¨‹â€¦"></textarea>

  </div>


  <!-- æ ‡å‡†å¡ -->
  <div class="card">

    <div class="section-title">â‘¡ æŠ½å–ä»Šæ—¥æ€ç»´æ ‡å‡†å¡</div>

    <button onclick="drawStandardCard()">æŠ½æ ‡å‡†å¡</button>

    <!-- ç¿»ç‰Œå®¹å™¨ -->
    <div class="flip-card" id="standardFlip">
      <div class="flip-card-inner">

        <div class="flip-front">
          ğŸ¸ ç‚¹å‡»â€œæŠ½æ ‡å‡†å¡â€ï¼Œçœ‹çœ‹ä»Šå¤©çš„æ€ç»´æ ‡å‡†
        </div>

        <div class="flip-back">
          <p id="standardCard" style="white-space:pre-wrap; margin:0;"></p>
        </div>

      </div>
    </div>

    <!-- æ‰“åˆ†åŒº -->
    <div class="section-title" style="margin-top:20px;">ä¸ºè¯¥æ ‡å‡†æ‰“åˆ†ï¼ˆ1â€“3 åˆ†ï¼‰</div>
    <select id="standardScore">
        <option value="1">1 åˆ†</option>
        <option value="2">2 åˆ†</option>
        <option value="3">3 åˆ†</option>
    </select>

    <div class="section-title">è¯šå®åº¦æ‰“åˆ†ï¼ˆ1â€“3 åˆ†ï¼‰</div>
    <select id="honestyScore">
        <option value="1">1 åˆ†</option>
        <option value="2">2 åˆ†</option>
        <option value="3">3 åˆ†</option>
    </select>

  </div>

  <!-- ä¿å­˜æŒ‰é’® -->
  <button onclick="saveToday()">ä¿å­˜ä»Šæ—¥è®°å½•</button>

</div>


<!-- ===========================
     ğŸ“ å†å²è®°å½•ï¼ˆå“ç‰Œç‰ˆï¼‰
     =========================== -->
<div class="container">
<div class="card" style="cursor:pointer;" onclick="toggleHistory()">

    <div class="master-header">
        <div class="master-icon">ğŸ“</div>
        <div class="master-title">æˆ‘çš„æ€ç»´è®°å½•ï¼ˆç‚¹å‡»å±•å¼€ï¼‰</div>
        <div class="master-arrow" id="history-arrow">â–¼</div>
    </div>

    <div id="history-content" class="master-content">

        <div id="history-list">
            <!-- JS ä¼šè‡ªåŠ¨å¡«å…¥è®°å½•åˆ—è¡¨ -->
        </div>

    </div>
</div>
</div>

<!-- ===========================
     ğŸ“… æ¯å‘¨æ€ç»´æˆé•¿æŠ¥å‘Šï¼ˆå“ç‰Œç‰ˆï¼‰
     =========================== -->
<div class="container">
<div class="card" onclick="toggleWeeklyReport()" style="cursor:pointer;">

    <div class="master-header">
        <div class="master-icon">ğŸ“…</div>
        <div class="master-title">æ¯å‘¨æ€ç»´æˆé•¿æŠ¥å‘Šï¼ˆç‚¹å‡»å±•å¼€ï¼‰</div>
        <div class="master-arrow" id="weekly-arrow">â–¼</div>
    </div>

    <div id="weekly-report-content" class="master-content">

        <div id="weekly-report-box" style="
            background:rgba(255,255,255,0.75);
            padding:20px;
            border-radius:16px;
            box-shadow:0 6px 20px rgba(0,0,0,0.08);
            margin-top:16px;
            line-height:1.7;
            color:var(--text-main);
        ">
            <!-- JS ä¼šè‡ªåŠ¨å¡«å…¥æŠ¥å‘Š -->
        </div>

    </div>
</div>
</div>

<!-- ===========================
     ğŸ¸ äº”å¤§å¤§å¸ˆå¡ç‰‡ï¼ˆå“ç‰Œç‰ˆï¼‰
     =========================== -->

<!-- ===== 1. å¤§å¸ˆï¼šå¤„ç†å†²çª ===== -->
<div class="container">
<div class="master-card" onclick="toggleMasterBeautiful('conflict')">

    <div class="master-header">
        <div class="master-icon">ğŸ¸</div>
        <div class="master-title">å¤§å¸ˆç¤ºèŒƒï¼šå¦‚ä½•ä¼˜é›…å¤„ç†å†²çªï¼Ÿ</div>
        <div class="master-arrow" id="arrow-conflict">â–¼</div>
    </div>

    <div id="content-conflict" class="master-content">

        <div class="master-section">
            <div class="master-section-title">âœ¨ å¤§å¸ˆçš„é»„é‡‘åŸåˆ™</div>
            <div class="master-pill">å…ˆç†è§£ï¼Œå†å›åº”</div>
            <div class="master-pill">å†²çªæ˜¯ä¸€ä¸ªâ€œæœªè¡¨è¾¾æ¸…æ™°çš„éœ€è¦â€</div>
            <div class="master-pill">é—®é¢˜ä¸æ˜¯è°å¯¹è°é”™ï¼Œè€Œæ˜¯â€œç°å®æ˜¯ä»€ä¹ˆâ€</div>
        </div>

        <div class="master-section">
            <div class="master-section-title">ğŸ“ å†²çªå·¥å…·ç®±</div>
            <div class="master-grid">
                <div class="master-grid-item">ğŸ¯ <b>æ˜ç¡®ç›®çš„</b><br> æˆ‘æ˜¯æƒ³èµ¢ï¼Ÿè¿˜æ˜¯æƒ³è§£å†³ï¼Ÿ</div>
                <div class="master-grid-item">â“ <b>çœŸæ­£é—®é¢˜</b><br> æ˜¯è¯¯è§£ï¼Ÿéœ€æ±‚ï¼Ÿè¾¹ç•Œï¼Ÿ</div>
                <div class="master-grid-item">ğŸ‘“ <b>æ¢è§†è§’</b><br> â€œå¦‚æœæˆ‘æ˜¯å¯¹æ–¹ï¼Œæˆ‘ä¼šæ€ä¹ˆæƒ³ï¼Ÿâ€</div>
                <div class="master-grid-item">ğŸ§© <b>æ‰¾å‡è®¾</b><br> â€œæˆ‘æ˜¯ä¸æ˜¯è¯¯ä¼šä»–äº†ï¼Ÿâ€</div>
                <div class="master-grid-item">ğŸ§  <b>æ€ç»´æ ‡å‡†</b><br> æ¸…æ™°ã€å‡†ç¡®ã€å…¬æ­£ã€æ·±åˆ»</div>
            </div>
        </div>

        <div class="master-section">
            <div class="master-section-title">ğŸ” å¤§å¸ˆåšæ³•ç¤ºèŒƒ</div>
            <div class="master-step"><span>â‘ </span>å…ˆç¡®è®¤å¯¹æ–¹æƒ…ç»ªï¼šâ€œå¬èµ·æ¥è¿™è®©ä½ å¾ˆç„¦è™‘ï¼Œå¯¹å—ï¼Ÿâ€</div>
            <div class="master-step"><span>â‘¡</span>ç¡®è®¤å¯¹æ–¹éœ€æ±‚ï¼šâ€œä½ å¸Œæœ›äº‹æƒ…æ›´æ˜ç¡®ä¸€äº›ï¼Ÿâ€</div>
            <div class="master-step"><span>â‘¢</span>è¡¨è¾¾è‡ªå·±çš„éœ€æ±‚ï¼šâ€œæˆ‘æƒ³ç†è§£ä½ çœŸæ­£æ‹…å¿ƒçš„ç‚¹ã€‚â€</div>
            <div class="master-step"><span>â‘£</span>ä¸€èµ·æ‰¾æ–¹æ¡ˆï¼šâ€œæˆ‘ä»¬èƒ½å¦æ‰¾ä¸€ä¸ªåŒæ–¹éƒ½èƒ½æ¥å—çš„è·¯å¾„ï¼Ÿâ€</div>
        </div>

        <div class="master-summary">
            ğŸŒˆ <b>å¤§å¸ˆæ€»ç»“ï¼š</b>  
            å†²çªä¸æ˜¯è¾“èµ¢ï¼Œè€Œæ˜¯ï¼š  
            **çœ‹è§çœŸå® â†’ å¯¹é½éœ€è¦ â†’ ä¸€èµ·è®©ç°å®å˜å¥½ã€‚**
        </div>

    </div>
</div>
</div>



<!-- ===== 2. å¤§å¸ˆï¼šç†è§£æƒ…ç»ª ===== -->
<div class="container">
<div class="master-card" onclick="toggleMasterBeautiful('emotion')">

    <div class="master-header">
        <div class="master-icon">ğŸ¸</div>
        <div class="master-title">å¤§å¸ˆç¤ºèŒƒï¼šå¦‚ä½•ç†è§£æƒ…ç»ªï¼Ÿ</div>
        <div class="master-arrow" id="arrow-emotion">â–¼</div>
    </div>

    <div id="content-emotion" class="master-content">

        <div class="master-section">
            <div class="master-section-title">âœ¨ æƒ…ç»ªçš„é»„é‡‘åŸåˆ™</div>
            <div class="master-pill">æƒ…ç»ªä¸æ˜¯æ•Œäººï¼Œæ˜¯ä¿¡æ¯</div>
            <div class="master-pill">æƒ…ç»ª â‰  äº‹å®</div>
            <div class="master-pill">è®©æƒ…ç»ªæç¤ºæ€ç»´ï¼Œè€Œä¸æ˜¯ä¸»å¯¼æ€ç»´</div>
        </div>

        <div class="master-section">
            <div class="master-section-title">ğŸ“ æƒ…ç»ªç»“æ„ï¼ˆå¤§å¸ˆçš„ä¸‰æ­¥ï¼‰</div>
            <div class="master-grid">
                <div class="master-grid-item">ğŸ¯ åˆºæ¿€<br> å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</div>
                <div class="master-grid-item">ğŸ§© è‡ªåŠ¨æƒ³æ³•<br> æˆ‘æ˜¯æ€ä¹ˆè§£é‡Šçš„ï¼Ÿ</div>
                <div class="master-grid-item">â¤ï¸ éœ€è¦<br> æˆ‘çœŸæ­£æ¸´æœ›ä»€ä¹ˆï¼Ÿ</div>
                <div class="master-grid-item">ğŸ‘“ å†è§£é‡Š<br> â€œå¦‚æœæˆ‘ä¸æ˜¯è¿™æ ·è§£è¯»ï¼Œä¼šæ€æ ·ï¼Ÿâ€</div>
            </div>
        </div>

        <div class="master-summary">
            ğŸŒˆ <b>å¤§å¸ˆæ€»ç»“ï¼š</b><br>
            å¤§å¸ˆä¸æ˜¯æ²¡æœ‰æƒ…ç»ªï¼Œ  
            è€Œæ˜¯ **èƒ½å¬æ‡‚æƒ…ç»ªåœ¨è¯´ä»€ä¹ˆ**ã€‚
        </div>

    </div>
</div>
</div>



<!-- ===== 3. å¤§å¸ˆï¼šåšé‡è¦å†³å®š ===== -->
<div class="container">
<div class="master-card" onclick="toggleMasterBeautiful('decision')">

    <div class="master-header">
        <div class="master-icon">ğŸ¸</div>
        <div class="master-title">å¤§å¸ˆç¤ºèŒƒï¼šå¦‚ä½•åšé‡è¦å†³å®šï¼Ÿ</div>
        <div class="master-arrow" id="arrow-decision">â–¼</div>
    </div>

    <div id="content-decision" class="master-content">

        <div class="master-section">
            <div class="master-section-title">âœ¨ å†³ç­–é»„é‡‘åŸåˆ™</div>
            <div class="master-pill">ç›®çš„å¿…é¡»æ¸…æ™°</div>
            <div class="master-pill">å¤§å†³å®š = å¤šå­é—®é¢˜æ„æˆ</div>
            <div class="master-pill">ä¸åšçš„ä»£ä»·ï¼Œä¹Ÿæ˜¯ä¸€ç§ä»£ä»·</div>
        </div>

        <div class="master-section">
            <div class="master-section-title">ğŸ“ å†³ç­–å·¥å…·ç®±</div>
            <div class="master-grid">
                <div class="master-grid-item">ğŸ¯ ç›®çš„<br> æˆ‘åˆ°åº•æƒ³å®ç°ä»€ä¹ˆï¼Ÿ</div>
                <div class="master-grid-item">â“ æ ¸å¿ƒé—®é¢˜<br> æˆ‘æŠŠé—®é¢˜æ‹†å¼€äº†å—ï¼Ÿ</div>
                <div class="master-grid-item">ğŸ“š ä¿¡æ¯<br> å·²çŸ¥ / æœªçŸ¥ / ä¸çŸ¥é“è‡ªå·±ä¸çŸ¥é“</div>
                <div class="master-grid-item">ğŸ§© å‡è®¾<br> â€œå¦‚æœæˆ‘é”™äº†ï¼Œä¼šæ€æ ·ï¼Ÿâ€</div>
                <div class="master-grid-item">ğŸ‘“ è§†è§’<br> æœªæ¥äº”å¹´çš„æˆ‘ä¼šæ€ä¹ˆçœ‹ï¼Ÿ</div>
            </div>
        </div>

        <div class="master-summary">
            ğŸŒˆ <b>å¤§å¸ˆæ€»ç»“ï¼š</b><br>
            é‡è¦å†³å®šä¸æ˜¯é€‰æœ€å¥½ï¼Œ  
            è€Œæ˜¯ **é€‰æœªæ¥æœ€ä¸åæ‚”çš„**ã€‚
        </div>

    </div>
</div>
</div>



<!-- ===== 4. å¤§å¸ˆï¼šåˆ¤æ–­ä¿¡æ¯çœŸå‡ ===== -->
<div class="container">
<div class="master-card" onclick="toggleMasterBeautiful('truth')">

    <div class="master-header">
        <div class="master-icon">ğŸ¸</div>
        <div class="master-title">å¤§å¸ˆç¤ºèŒƒï¼šå¦‚ä½•åˆ¤æ–­ä¿¡æ¯çœŸå‡ï¼Ÿ</div>
        <div class="master-arrow" id="arrow-truth">â–¼</div>
    </div>

    <div id="content-truth" class="master-content">

        <div class="master-section">
            <div class="master-section-title">âœ¨ åˆ¤æ–­é»„é‡‘åŸåˆ™</div>
            <div class="master-pill">ä¸è¦åªéªŒè¯ä½ â€œæƒ³ç›¸ä¿¡çš„â€</div>
            <div class="master-pill">è¯æ®æ¯”è§‚ç‚¹æ›´é‡è¦</div>
            <div class="master-pill">ä¸»åŠ¨æ‰¾åè¯</div>
        </div>

        <div class="master-section">
            <div class="master-grid">
                <div class="master-grid-item">ğŸ“š æ¥æºå¯é ï¼Ÿ</div>
                <div class="master-grid-item">ğŸ§  è¯æ®å……åˆ†ï¼Ÿ</div>
                <div class="master-grid-item">ğŸ”— é€»è¾‘ä¸€è‡´ï¼Ÿ</div>
                <div class="master-grid-item">â“ èƒ½è¢«è¯ä¼ªï¼Ÿ</div>
            </div>
        </div>

        <div class="master-summary">
            ğŸŒˆ <b>å¤§å¸ˆæ€»ç»“ï¼š</b><br>
            å¤§å¸ˆä¸æ˜¯æ›´èªæ˜ï¼Œ  
            è€Œæ˜¯ **æ›´æ„¿æ„æ£€éªŒè‡ªå·±çš„ä¿¡å¿µ**ã€‚
        </div>

    </div>
</div>
</div>



<!-- ===== 5. å¤§å¸ˆï¼šå¦‚ä½•å­¦ä¹  ===== -->
<div class="container">
<div class="master-card" onclick="toggleMasterBeautiful('learning')">

    <div class="master-header">
        <div class="master-icon">ğŸ¸</div>
        <div class="master-title">å¤§å¸ˆç¤ºèŒƒï¼šå¦‚ä½•å­¦ä¹ ï¼Ÿ</div>
        <div class="master-arrow" id="arrow-learning">â–¼</div>
    </div>

    <div id="content-learning" class="master-content">

        <div class="master-section">
            <div class="master-section-title">âœ¨ å­¦ä¹ é»„é‡‘åŸåˆ™</div>
            <div class="master-pill">ç†è§£ç»“æ„ > æ­»è®°ç¡¬èƒŒ</div>
            <div class="master-pill">æ‰¾å…³é”®æ¦‚å¿µ</div>
            <div class="master-pill">æŠŠçŸ¥è¯†åº”ç”¨åˆ°ç”Ÿæ´»é‡Œ</div>
        </div>

        <div class="master-section">
            <div class="master-grid">
                <div class="master-grid-item">ğŸ¯ å­¦ä¹ ç›®çš„<br> æˆ‘è¦é€šè¿‡å­¦ä¹ å˜æˆæ€æ ·çš„äººï¼Ÿ</div>
                <div class="master-grid-item">ğŸ“š çŸ¥è¯†ç»“æ„<br> æŠ“æœ¬è´¨ã€åŸç†ã€æ¨¡å‹ã€‚</div>
                <div class="master-grid-item">ğŸ§© å‡è®¾æ£€æŸ¥<br> â€œæˆ‘ä»¥ä¸ºæˆ‘æ‡‚äº†ï¼Œä½†æˆ‘çœŸçš„æ‡‚äº†å—ï¼Ÿâ€</div>
                <div class="master-grid-item">ğŸ‘“ è§†è§’è½¬æ¢<br> æ–°çŸ¥è¯†ä¸äººç”Ÿæ–¹å‘æ€ä¹ˆè¿æ¥ï¼Ÿ</div>
            </div>
        </div>

        <div class="master-summary">
            ğŸŒˆ <b>å¤§å¸ˆæ€»ç»“ï¼š</b><br>
            å¤§å¸ˆçš„å­¦ä¹ æ–¹å¼ï¼š  
            **ç†è§£ â†’ åº”ç”¨ â†’ å†ç†è§£ â†’ å†åº”ç”¨ã€‚**
        </div>

    </div>
</div>
</div>


<script>
function toggleMasterBeautiful(id){
    const content = document.getElementById("content-"+id);
    const arrow = document.getElementById("arrow-"+id);
    const open = content.style.display === "block";

    content.style.display = open ? "none" : "block";
    arrow.style.transform = open ? "rotate(0deg)" : "rotate(180deg)";
}
</script>


    
<script>
function drawElementCard() {
    const card = elementCards[Math.floor(Math.random()*elementCards.length)];
    document.getElementById("elementCard").innerText = card.text;
    localStorage.setItem("today_element", JSON.stringify(card));

    const flip = document.getElementById("elementFlip");
    flip.classList.add("flip");
    setTimeout(()=> flip.classList.remove("flip"), 700);
}

function drawStandardCard() {
    const card = standardCards[Math.floor(Math.random()*standardCards.length)];
    document.getElementById("standardCard").innerText = card.text;
    localStorage.setItem("today_standard", JSON.stringify(card));

    const flip = document.getElementById("standardFlip");
    flip.classList.add("flip");
    setTimeout(()=> flip.classList.remove("flip"), 700);
}
</script>

<script>
function toggleHistory(){
    const el = document.getElementById("history-content");
    const arrow = document.getElementById("history-arrow");
    const open = el.style.display === "block";

    el.style.display = open ? "none" : "block";
    arrow.style.transform = open ? "rotate(0deg)" : "rotate(180deg)";

    if (!open) renderHistory();
}
</script>

<!-- ===========================
     ğŸ“Œ ç¬¬ 8 æ®µï¼šå…¨ç«™ JSï¼ˆæœ€ç»ˆæ­£ç¡®ç‰ˆï¼‰
     =========================== -->

<script>

/* ===========================================================
   ğŸ´ æŠ½å¡æ•°æ®æºï¼ˆå…ƒç´ å¡ & æ ‡å‡†å¡ï¼‰
=========================================================== */
const elementCards = [
    {key:"ç›®çš„", text:"ã€ç›®çš„å¡ã€‘ä»Šå¤©ä½ çœŸæ­£çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿè¡¨é¢ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"},
    {key:"é—®é¢˜", text:"ã€é—®é¢˜å¡ã€‘æŠŠä½ çº ç»“çš„ä¸€ä»¶äº‹æ”¹å†™æˆä¸€ä¸ªæ¸…æ™°çš„é—®é¢˜å¥ã€‚"},
    {key:"ä¿¡æ¯", text:"ã€ä¿¡æ¯å¡ã€‘å†™å‡º 3 æ¡äº‹å® + 3 æ¡æ¨æµ‹ï¼Œå¹¶æ ‡è®°æ¸…æ¥šã€‚"},
    {key:"æ¦‚å¿µ", text:"ã€æ¦‚å¿µå¡ã€‘å†™ä¸‹ä¸€ä¸ªæŠ½è±¡è¯çš„å®šä¹‰ï¼Œå¦‚è‡ªç”± / å®‰å…¨ / æˆå°±ã€‚"},
    {key:"æ¨è®º", text:"ã€æ¨è®ºå¡ã€‘å†™ä¸‹ä½ å¾—å‡ºçš„ä¸€ä¸ªç»“è®ºä»¥åŠ 2â€“3 ä¸ªç†ç”±ã€‚"},
    {key:"å‡è®¾", text:"ã€å‡è®¾å¡ã€‘å†™ä¸‹ä½ æ­£åœ¨é»˜è®¤æˆç«‹çš„ä¸œè¥¿ï¼šå¦‚æœå®ƒæ˜¯é”™çš„å‘¢ï¼Ÿ"},
    {key:"è§†è§’", text:"ã€è§†è§’å¡ã€‘ä»åæ–¹è§†è§’å†™ 2 å¥è¯çœ‹è¿™ä»¶äº‹ã€‚"},
    {key:"åæœ", text:"ã€åæœå¡ã€‘å†™å‡ºä¸€ä¸ªå†³å®šçš„çŸ­æœŸåæœ + é•¿æœŸåæœã€‚"}
];

const standardCards = [
    {key:"æ¸…æ™°", text:"ã€æ¸…æ™°å¡ã€‘ä½ çš„è¡¨è¾¾æ˜¯å¦å®¹æ˜“ç†è§£ï¼Ÿ"},
    {key:"å‡†ç¡®", text:"ã€å‡†ç¡®å¡ã€‘å“ªäº›æ˜¯äº‹å®ï¼Ÿå“ªäº›å¯èƒ½é”™è¯¯ï¼Ÿ"},
    {key:"ç²¾ç¡®", text:"ã€ç²¾ç¡®å¡ã€‘èƒ½å¦ç”¨æ•°å­—/ä¾‹å­æ›´å…·ä½“ï¼Ÿ"},
    {key:"ç›¸å…³", text:"ã€ç›¸å…³å¡ã€‘æ˜¯å¦ç´§æ‰£æ ¸å¿ƒé—®é¢˜ï¼Ÿ"},
    {key:"æ·±åˆ»", text:"ã€æ·±åˆ»å¡ã€‘æ˜¯å¦è§¦åŠæ›´æ·±ä¸€å±‚ï¼Ÿ"},
    {key:"å¹¿åº¦", text:"ã€å¹¿åº¦å¡ã€‘åæ–¹ä¼šæ€ä¹ˆå†™ï¼Ÿ"},
    {key:"é€»è¾‘", text:"ã€é€»è¾‘å¡ã€‘ç†ç”±æ˜¯å¦æ”¯æŒç»“è®ºï¼Ÿ"},
    {key:"é‡è¦æ€§", text:"ã€é‡è¦æ€§å¡ã€‘å…³æ³¨çš„æ˜¯å…³é”®ç‚¹å—ï¼Ÿ"},
    {key:"å…¬æ­£", text:"ã€å…¬æ­£å¡ã€‘æ˜¯å¦å¸¦åè§ï¼Ÿ"}
];


/* ===========================================================
   ğŸ´ æŠ½å¡ç¿»ç‰ŒåŠ¨ç”»
=========================================================== */
function drawElementCard() {
    const card = elementCards[Math.floor(Math.random()*elementCards.length)];
    document.getElementById("elementCard").innerText = card.text;
    localStorage.setItem("today_element", JSON.stringify(card));

    const flip = document.getElementById("elementFlip");
    flip.classList.add("flip");
    setTimeout(()=> flip.classList.remove("flip"), 700);
}

function drawStandardCard() {
    const card = standardCards[Math.floor(Math.random()*standardCards.length)];
    document.getElementById("standardCard").innerText = card.text;
    localStorage.setItem("today_standard", JSON.stringify(card));

    const flip = document.getElementById("standardFlip");
    flip.classList.add("flip");
    setTimeout(()=> flip.classList.remove("flip"), 700);
}


/* ===========================================================
   ğŸ§¬ ç­‰çº§ç³»ç»Ÿï¼ˆexp & levelï¼‰
=========================================================== */
const LEVELS = [
    { level: 1, name: "æ€ç»´èŒèŠ½ Seedling", min: 0, max: 99, percentile: 20 },
    { level: 2, name: "æ€ç»´è§‚å¯Ÿè€… Observer", min: 100, max: 249, percentile: 35 },
    { level: 3, name: "æ€ç»´æ¢ç´¢è€… Explorer", min: 250, max: 499, percentile: 50 },
    { level: 4, name: "æ€ç»´å®è·µè€… Practitioner", min: 500, max: 899, percentile: 70 },
    { level: 5, name: "æ€ç»´ç­–å£« Strategist", min: 900, max: 1499, percentile: 85 },
    { level: 6, name: "æ€ç»´é©¾é©­è€… Navigator", min: 1500, max: 2499, percentile: 95 },
    { level: 7, name: "æ€ç»´å¤§å¸ˆ Master", min: 2500, max: 999999, percentile: 99 }
];

function calculateEXP(r){ return (r.standardScore + r.honestyScore) * 5; }
function getTotalEXP(logs){ return logs.reduce((s,r)=>s+calculateEXP(r),0); }
function getLevel(total){ return LEVELS.find(l=>total>=l.min && total<=l.max); }
function getNextEXP(level){ return level.level===7 ? level.max : LEVELS[level.level].min; }

function updateLevelUI(){
    const logs = JSON.parse(localStorage.getItem("logs") || "[]");

    const total = getTotalEXP(logs);
    const lv = getLevel(total);
    const next = getNextEXP(lv);
    const pct = Math.min((total - lv.min) / (next - lv.min), 1) * 100;

    document.getElementById("level-title").innerText =
        `ç­‰çº§ Lv.${lv.level}ï¼š${lv.name}`;

    document.getElementById("level-exp-text").innerText =
        `ç§¯åˆ†ï¼š${total} / ${next}`;

    document.getElementById("progress-bar").style.width = pct + "%";

    document.getElementById("percentile-text").innerText =
        `ä½ è¶…è¿‡äº†å…¨çƒ ${lv.percentile}% çš„äººç±»`;
}



/* ===========================================================
   ğŸ“ ä¿å­˜è®°å½•
=========================================================== */
function saveToday(){
    const e = JSON.parse(localStorage.getItem("today_element"));
    const s = JSON.parse(localStorage.getItem("today_standard"));

    if(!e || !s){
        alert("è¯·å…ˆæŠ½å…ƒç´ å¡å’Œæ ‡å‡†å¡ï¼");
        return;
    }

    const text = document.getElementById("elementAnswer").value.trim();

    const record = {
        date: new Date().toISOString().slice(0,10),
        element: e.key,
        standard: s.key,
        text: text,
        standardScore: parseInt(document.getElementById("standardScore").value),
        honestyScore: parseInt(document.getElementById("honestyScore").value)
    };

    let logs = JSON.parse(localStorage.getItem("logs") || "[]");
    logs.push(record);
    localStorage.setItem("logs", JSON.stringify(logs));

    alert("ä»Šæ—¥è®°å½•å·²ä¿å­˜ï¼");
    updateLevelUI();
}



/* ===========================================================
   ğŸ“ å†å²è®°å½•æŠ˜å  & æ¸²æŸ“
=========================================================== */
function toggleHistory(){
    const box = document.getElementById("history-content");
    const arrow = document.getElementById("history-arrow");
    const open = box.style.display === "block";

    box.style.display = open ? "none" : "block";
    arrow.style.transform = open ? "rotate(0deg)" : "rotate(180deg)";

    if (!open) renderHistory();
}

function renderHistory(){
    const container = document.getElementById("history-list");
    let logs = JSON.parse(localStorage.getItem("logs") || "[]");

    if(!logs.length){
        container.innerHTML = "<div style='padding:10px;color:#64748b;'>æš‚æ— è®°å½• ğŸ¸</div>";
        return;
    }

    logs = logs.sort((a,b)=> new Date(b.date) - new Date(a.date));

    let html="";
    logs.forEach((r,i)=>{
        html += `
        <div class="card" style="margin-top:12px; cursor:pointer;" onclick="toggleHistoryDetail(${i})">

            <div style="display:flex;justify-content:space-between;align-items:center;">
                <div style="font-size:15px;font-weight:600;color:var(--green-deep);">
                    ğŸ¸ ${r.date}
                </div>
                <div id="arrow-h${i}" style="font-size:18px;">â–¼</div>
            </div>

            <div style="font-size:14px;color:var(--text-sub);margin-top:6px;">
                å…ƒç´ å¡ï¼š${r.element} |
                æ ‡å‡†å¡ï¼š${r.standard}
            </div>

            <div id="history-detail-${i}" style="
                display:none;
                margin-top:14px;
                padding:12px;
                background:#f0fdf4;
                border-radius:12px;
                color:#166534;
                line-height:1.6;">
                ${r.text.replace(/\n/g,"<br>")}
            </div>

        </div>`;
    });

    container.innerHTML = html;
}

function toggleHistoryDetail(i){
    const d = document.getElementById("history-detail-"+i);
    const arrow = document.getElementById("arrow-h"+i);
    const open = d.style.display === "block";

    d.style.display = open ? "none" : "block";
    arrow.style.transform = open ? "rotate(0deg)" : "rotate(180deg)";
}



/* ===========================================================
   ğŸ“… æ¯å‘¨æˆé•¿æŠ¥å‘Šï¼ˆç”Ÿæˆ + æŠ˜å ï¼‰
=========================================================== */
function toggleWeeklyReport(){
    const box = document.getElementById("weekly-report-content");
    const arrow = document.getElementById("weekly-arrow");
    const open = box.style.display === "block";

    box.style.display = open ? "none" : "block";
    arrow.style.transform = open ? "rotate(0deg)" : "rotate(180deg)";

    if(!open) generateWeeklyReport();
}

function generateWeeklyReport(){
    const logs = JSON.parse(localStorage.getItem("logs") || "[]");
    const now = Date.now();
    const oneWeek = 7*24*3600*1000;

    const weekLogs = logs.filter(r=> now - new Date(r.date).getTime() < oneWeek);
    const box = document.getElementById("weekly-report-box");

    if (!weekLogs.length){
        box.innerHTML = "æœ¬å‘¨æ²¡æœ‰è®°å½• ğŸ¸<br>å†™ä¸€æ¡è®°å½•åï¼Œè¿™é‡Œå°†è‡ªåŠ¨ç”Ÿæˆæˆé•¿æŠ¥å‘Šã€‚";
        return;
    }

    const count = weekLogs.length;

    const avgScore = (
        weekLogs.reduce((s,r)=> s + r.standardScore + r.honestyScore ,0)
        / count
    ).toFixed(2);

    const stats = {};
    weekLogs.forEach(r=>{
        stats[r.element] = (stats[r.element]||0)+1;
    });

    const best = Object.keys(stats).sort((a,b)=> stats[b]-stats[a])[0];
    const weak = Object.keys(stats).sort((a,b)=> stats[a]-stats[b])[0];

    box.innerHTML = `
        <b>ğŸ¸ æœ¬å‘¨è®°å½•æ¬¡æ•°ï¼š</b> ${count} æ¬¡<br>
        <b>â­ å¹³å‡æ€ç»´å¾—åˆ†ï¼š</b> ${avgScore}<br>
        <b>ğŸ¯ æœ€å¸¸ç»ƒä¹ è¦ç´ ï¼š</b> ${best}<br>
        <b>ğŸª© æœ€å°‘ç»ƒä¹ è¦ç´ ï¼š</b> ${weak}<br><br>

        <b>ğŸ¸ å¤§å¸ˆå»ºè®®ï¼š</b><br>
        <div style="background:#f0fdf4;padding:12px;border-radius:12px;color:#166534;">
            ${
                weak === "å‡è®¾"
                ? "æœ¬å‘¨å»ºè®®å¤šç»ƒâ€œè¯†åˆ«éšè—å‡è®¾â€ã€‚è¯•ç€é—®è‡ªå·±ï¼šå¦‚æœè¿™ä¸ªå‡è®¾æ˜¯é”™çš„å‘¢ï¼Ÿ"
                : weak === "ä¿¡æ¯"
                ? "ä¸‹å‘¨å¯ä»¥ç»ƒä¹ â€œåŒºåˆ†äº‹å®ä¸æ¨æµ‹â€ã€‚è®©ä½ çš„æ¨è®ºæ›´æ‰å®ã€‚"
                : "ä½ çš„æ•´ä½“è¡¨ç°å¾ˆç¨³å®šï¼Œæ¯å¤©ä¸€ç‚¹ç‚¹å°±æ˜¯æˆé•¿ ğŸ¸âœ¨"
            }
        </div>
    `;
}



/* ===========================================================
   ğŸ§  æ€ç»´åŠ¨ç”»ï¼ˆå…«è¦ç´ æµåŠ¨ï¼‰
=========================================================== */
let stepsFlow = ["purpose","question","info","concept","assumption","inference","view","impact"];
let idx = 0;

setInterval(()=>{
    stepsFlow.forEach(s=>{
        const el = document.getElementById("step-"+s);
        if(el) el.classList.remove("active");
    });

    const curr = document.getElementById("step-"+stepsFlow[idx]);
    if(curr) curr.classList.add("active");

    idx = (idx+1)%stepsFlow.length;
},1800);



/* ===========================================================
   ğŸ“Š å›¾è¡¨ç³»ç»Ÿï¼ˆå…«è¦ç´ é›·è¾¾ã€æ ‡å‡†é›·è¾¾ã€é˜¶æ®µè¶‹åŠ¿æŠ˜çº¿ï¼‰
=========================================================== */

function calcElementFrequency(logs){
    const keys = ["ç›®çš„","é—®é¢˜","ä¿¡æ¯","æ¦‚å¿µ","æ¨è®º","å‡è®¾","è§†è§’","åæœ"];
    return {
        labels: keys,
        data: keys.map(k=> logs.filter(r=>r.element===k).length)
    };
}

function calcStandardScores(logs){
    const keys = ["æ¸…æ™°","å‡†ç¡®","ç²¾ç¡®","ç›¸å…³","æ·±åˆ»","å¹¿åº¦","é€»è¾‘","é‡è¦æ€§","å…¬æ­£"];
    return {
        labels: keys,
        data: keys.map(k=>{
            const arr = logs.filter(r=>r.standard===k);
            if(!arr.length) return 0;
            return arr.reduce((a,b)=>a+b.standardScore,0) / arr.length;
        })
    };
}

function calcStageTrend(logs){
    logs = [...logs].sort((a,b)=> new Date(a.date)-new Date(b.date));
    return {
        labels: logs.map(r=>r.date),
        values: logs.map(r=>{
            const sc = (r.standardScore + r.honestyScore)/2;
            if(sc<2) return 1;
            if(sc<2.5) return 2;
            return 3;
        })
    };
}

let elementRadarChart, standardRadarChart, stageTrendChart;

function renderCharts(logs){
    const element = calcElementFrequency(logs);
    const std = calcStandardScores(logs);
    const trend = calcStageTrend(logs);

    if(elementRadarChart) elementRadarChart.destroy();
    if(standardRadarChart) standardRadarChart.destroy();
    if(stageTrendChart) stageTrendChart.destroy();

    elementRadarChart = new Chart(
        document.getElementById("elementRadar"),
        {
            type:'radar',
            data:{
                labels: element.labels,
                datasets:[{
                    label:"ç»ƒä¹ æ¬¡æ•°",
                    data: element.data,
                    borderColor:"#22c55e",
                    backgroundColor:"rgba(34,197,94,0.2)"
                }]
            }
        });

    standardRadarChart = new Chart(
        document.getElementById("standardRadar"),
        {
            type:'radar',
            data:{
                labels: std.labels,
                datasets:[{
                    label:"å¹³å‡åˆ†",
                    data: std.data,
                    borderColor:"#3b82f6",
                    backgroundColor:"rgba(59,130,246,0.2)"
                }]
            }
        });

    stageTrendChart = new Chart(
        document.getElementById("stageTrend"),
        {
            type:'line',
            data:{
                labels: trend.labels,
                datasets:[{
                    label:"é˜¶æ®µè¶‹åŠ¿ (1=æŒ£æ‰/2=åˆå­¦/3=ç»ƒä¹ )",
                    data: trend.values,
                    borderColor:"#f97316",
                    tension:0.35,
                    pointRadius:3
                }]
            },
            options:{
                scales:{
                    y:{min:1,max:3,ticks:{stepSize:1}}
                }
            }
        });
}


/* ===========================================================
   ğŸš€ é¡µé¢åˆå§‹åŒ–
=========================================================== */
updateLevel
