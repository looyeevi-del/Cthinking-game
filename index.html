<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ€ç»´å†’é™©è€… Â· æ‰¹åˆ¤æ€§æ€ç»´è®­ç»ƒå°æ¸¸æˆ</title>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- ===== è›¤èŸ†ä¸»é¢˜ UI ===== -->
<style>
    body {
        margin: 0;
        font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
        background: linear-gradient(135deg, #d1fae5, #fef9c3); /* é’è›™ç»¿ + æŸ”é»„ */
        min-height: 100vh;
    }

    /* é¡¶éƒ¨æ  */
    header {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        padding: 18px 0;
        background: #14532d; /* æ£®æ—æ·±ç»¿ */
        box-shadow: 0 2px 6px rgba(0,0,0,0.25);
    }

    header img {
        height: 48px;
        border-radius: 10px;
    }

    header span {
        color: white;
        font-size: 20px;
        font-weight: bold;
    }

    /* ä¸»å®¹å™¨ */
    .container {
        max-width: 760px;
        margin: 0 auto;
        padding: 20px;
    }

    /* ç»ç’ƒå¡ç‰‡ï¼ˆè›¤èŸ†ç‰ˆï¼‰ */
    .card {
        background: rgba(255,255,255,0.55);
        backdrop-filter: blur(14px);
        padding: 22px;
        border-radius: 20px;
        box-shadow: 0 10px 35px rgba(0,0,0,0.07);
        margin-bottom: 28px;
        border: 1px solid rgba(255,255,255,0.5);
        position: relative;
    }

    /* æ¯å¼ å¡ç‰‡å³ä¸Šè§’ä¸€åªå°è›¤èŸ† */
    .card::after {
        content: "ğŸ¸";
        position: absolute;
        top: 12px;
        right: 18px;
        font-size: 20px;
        opacity: 0.8;
    }

    .section-title {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 12px;
        color: #0f172a;
    }

    button {
        background: #22c55e;
        border: none;
        padding: 12px 16px;
        border-radius: 12px;
        font-size: 15px;
        color: white;
        cursor: pointer;
        transition: 0.2s;
    }
    button:hover {
        background: #16a34a;
    }

    textarea {
        width: 100%;
        padding: 12px;
        border-radius: 14px;
        border: 1px solid #cbd5e1;
        font-size: 15px;
        background: white;
        box-sizing: border-box;
        margin-top: 8px;
        min-height:140px;
    }

    select {
        width: 100%;
        padding: 10px;
        border-radius: 12px;
        font-size: 15px;
        border: 1px solid #cbd5e1;
        margin-bottom: 10px;
    }

    canvas {
        max-width: 100%;
    }

    /* ===== ç­‰çº§å¡ç‰‡ ===== */
    #level-card {
        background: rgba(255,255,255,0.85);
        border-radius: 20px;
        padding: 20px;
        box-shadow: 0 12px 40px rgba(0,0,0,0.1);
        margin-top: 20px;
    }

    #progress-bar {
        height: 12px;
        background: linear-gradient(90deg,#4ade80,#16a34a);
        width: 0%;
        border-radius: 6px;
        transition: width 0.5s ease;
    }

    .progress-bg {
        background:#d1fae5;
        height:12px;
        border-radius:6px;
    }

    /* ===== æ€ç»´åŠ¨ç”»ï¼ˆå…«è¦ç´ åŠ¨æ€ï¼‰ ===== */
    .thinking-flow {
        display:flex;
        gap:8px;
        flex-wrap:wrap;
        margin-top:10px;
    }

    .thinking-step {
        padding:6px 10px;
        border-radius:8px;
        background:#bbf7d0;
        color:#166534;
        font-size:14px;
        opacity:0.4;
        transition:0.3s;
    }

    .thinking-step.active {
        background:#22c55e;
        color:white;
        opacity:1;
        transform:scale(1.08);
    }

    /* ======= å¤§å¸ˆå¡ç‰‡ï¼ˆæ¼‚äº®è›¤èŸ†é£ï¼‰ ======= */
    .master-card {
        background: rgba(255,255,255,0.7);
        border-radius:20px;
        padding:20px;
        cursor:pointer;
        box-shadow:0 12px 40px rgba(0,0,0,0.1);
    }

    .master-header {
        display:flex;
        align-items:center;
        justify-content:space-between;
    }

    .master-title {
        font-size:18px;
        font-weight:600;
        margin-left:8px;
        color:#0f172a;
    }

    .master-icon {
        font-size:26px;
    }

    .master-arrow {
        font-size:20px;
        transition:0.3s;
    }

    .master-content {
        display:none;
        margin-top:20px;
        line-height:1.65;
        font-size:15px;
        color:#1e293b;
    }

    .master-section {
        margin-bottom:22px;
    }

    .master-section-title {
        font-size:16px;
        font-weight:bold;
        margin-bottom:10px;
        color:#14532d;
    }

    .master-pill {
        background:#dcfce7;
        color:#166534;
        padding:8px 12px;
        border-radius:12px;
        display:inline-block;
        margin:6px 6px 0 0;
        font-size:14px;
    }

    .master-grid {
        display:grid;
        grid-template-columns:1fr 1fr;
        gap:12px;
    }

    .master-grid-item {
        background:#f0fdf4;
        border-radius:14px;
        padding:12px;
        box-shadow:0 2px 10px rgba(0,0,0,0.05);
        font-size:14px;
    }

    .master-step {
        margin:10px 0;
    }

    .master-step span {
        background:#22c55e;
        color:white;
        border-radius:50%;
        padding:4px 8px;
        margin-right:8px;
        font-size:13px;
    }

    .master-summary {
        background:#fef9c3;
        padding:14px;
        border-radius:12px;
        color:#92400e;
        font-size:15px;
        margin-top:10px;
    }

</style>
</head>
<body>

<!-- LOGO Header -->
<header>
    <img src="ChatGPT Image 2025å¹´11æœˆ17æ—¥ 17_47_21.png" alt="logo">
    <span>æ€ç»´å†’é™©è€… Â· æ‰¹åˆ¤æ€§æ€ç»´è®­ç»ƒå°æ¸¸æˆ</span>
</header>

<!-- ===========================
     ğŸŒŒ æ€ç»´æ˜Ÿå›¾å…¥å£ï¼ˆæ”¾åœ¨æœ€å‰é¢ï¼‰
     =========================== -->
<div class="container">
  <div class="card" style="border-left:6px solid #22c55e;">

      <div class="section-title">ğŸŒŒ æˆ‘çš„æ€ç»´æ˜Ÿå›¾</div>

      <p style="font-size:14px; color:#475569; line-height:1.6; margin-top:-4px;">
          è¿™æ˜¯å±äºä½ çš„ <b>æ€ç»´å®‡å®™åœ°å›¾</b>ã€‚<br>
          ç³»ç»Ÿä¼šæ ¹æ®ä½ æ‰€æœ‰å†™ä¸‹çš„å†…å®¹ï¼Œè‡ªåŠ¨æå–å…³é”®è¯ï¼Œç”Ÿæˆä¸€ä¸ªâ€œåŠ¨æ€æ˜Ÿç©ºâ€â€”  
          <br><br>
          ğŸŸ¢ èŠ‚ç‚¹è¶Šå¤§ â†’ å‡ºç°è¶Šé¢‘ç¹  
          <br>
          ğŸŸ¢ èŠ‚ç‚¹è·ç¦»è¶Šè¿‘ â†’ æ€ç»´å…³è”è¶Šå¼º  
          <br>
          ğŸŸ¢ è¿çº¿ â†’ å…±ç°å…³ç³»  
          <br><br>
          ç‚¹å‡»è¿›å…¥ï¼Œæ¢ç´¢ä½ çš„å¤§è„‘æ˜Ÿç©º ğŸ¸ğŸŒŒ
      </p>

      <button 
          onclick="window.location.href='mind-map.html'" 
          style="margin-top:10px; background:#22c55e; border-radius:12px; padding:10px 14px; font-size:15px;">
          âœ¨ è¿›å…¥æˆ‘çš„æ€ç»´å®‡å®™
      </button>

  </div>
</div>

    
<!-- ===== ç­‰çº§ç³»ç»Ÿå¡ç‰‡ ===== -->
<div class="container">
<div id="level-card">
    <div id="level-title">ç­‰çº§ï¼šåŠ è½½ä¸­...</div>

    <div class="progress-bg">
        <div id="progress-bar"></div>
    </div>

    <div id="level-exp-text" style="margin-top:6px; color:#475569;">ç§¯åˆ†ï¼š0</div>
    <div id="percentile-text">ä½ è¶…è¿‡äº†å…¨çƒ 0% çš„äººç±»</div>
</div>
</div>

<!-- ===== ä¸»åŠŸèƒ½åŒº ===== -->
<div class="container">

    <!-- æŠ½å…ƒç´ å¡ -->
    <div class="card">
        <div class="section-title">â‘  æŠ½å–ä»Šæ—¥æ€ç»´å…ƒç´ å¡</div>
        <button onclick="drawElementCard()">æŠ½å…ƒç´ å¡</button>
        <p id="elementCard" style="white-space:pre-wrap;"></p>
        <textarea id="elementAnswer" placeholder="åœ¨è¿™é‡Œå†™ä¸‹ä½ çš„å›ç­”..."></textarea>
    </div>

    <!-- æŠ½æ ‡å‡†å¡ -->
    <div class="card">
        <div class="section-title">â‘¡ æŠ½å–ä»Šæ—¥æ€ç»´æ ‡å‡†å¡</div>
        <button onclick="drawStandardCard()">æŠ½æ ‡å‡†å¡</button>
        <p id="standardCard" style="white-space:pre-wrap;"></p>

        <div class="section-title">ä¸ºè¯¥æ ‡å‡†æ‰“åˆ†ï¼ˆ1â€“3 åˆ†ï¼‰</div>
        <select id="standardScore">
            <option value="1">1 åˆ†</option>
            <option value="2">2 åˆ†</option>
            <option value="3">3 åˆ†</option>
        </select>

        <div class="section-title">è¯šå®åº¦æ‰“åˆ†ï¼ˆ1â€“3 åˆ†ï¼‰</div>
        <select id="honestyScore">
            <option value="1">1 åˆ†</option>
            <option value="2">2 åˆ†</option>
            <option value="3">3 åˆ†</option>
        </select>
    </div>

    <!-- ä¿å­˜è®°å½• -->
    <button onclick="saveToday()">ä¿å­˜ä»Šæ—¥è®°å½•</button>

    <!-- å‘¨ç»Ÿè®¡ -->
    <div class="card">
        <div class="section-title">â‘¢ æœ¬å‘¨ç»Ÿè®¡ï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰</div>
        <pre id="weeklyStats"></pre>
        <button onclick="showWeekly()">åˆ·æ–°ç»Ÿè®¡ & å›¾è¡¨</button>
    </div>
</div>

<!-- ===== æ€ç»´åŠ¨ç”»ï¼ˆå…«è¦ç´ æµåŠ¨ï¼‰ ===== -->
<div class="container">
<div class="card">
    <div class="section-title">âœ¨ å¤§å¸ˆæ€ç»´åŠ¨ç”»ï¼ˆå…«è¦ç´ åŠ¨æ€æµåŠ¨ï¼‰</div>

    <div class="thinking-flow">
        <div class="thinking-step" id="step-purpose">ç›®çš„</div>
        <div class="thinking-step" id="step-question">é—®é¢˜</div>
        <div class="thinking-step" id="step-info">ä¿¡æ¯</div>
        <div class="thinking-step" id="step-concept">æ¦‚å¿µ</div>
        <div class="thinking-step" id="step-assumption">å‡è®¾</div>
        <div class="thinking-step" id="step-inference">æ¨è®º</div>
        <div class="thinking-step" id="step-view">è§†è§’</div>
        <div class="thinking-step" id="step-impact">åæœ</div>
    </div>
</div>
</div>

<script>
/* ========== å¤§å¸ˆæ€ç»´åŠ¨ç”»é€»è¾‘ ========== */
let steps = ["purpose","question","info","concept","assumption","inference","view","impact"];
let index = 0;

setInterval(() => {
    steps.forEach(s =>
        document.getElementById("step-"+s).classList.remove("active")
    );
    document.getElementById("step-"+steps[index]).classList.add("active");
    index = (index + 1) % steps.length;
}, 1800);
</script>
<!-- ========= å›¾è¡¨æ¨¡å—ï¼šæ€ç»´è¦ç´ é›·è¾¾å›¾ / æ ‡å‡†é›·è¾¾å›¾ / é˜¶æ®µè¶‹åŠ¿åŒºåˆ«æ›²çº¿ ========= -->
<div class="container">
    <div class="card">
        <div class="section-title">ğŸ“Š æ€ç»´è¦ç´ ç»ƒä¹ è¦†ç›–åº¦ï¼ˆé›·è¾¾å›¾ï¼‰</div>
        <canvas id="elementRadar"></canvas>
    </div>

    <div class="card">
        <div class="section-title">ğŸ“Š æ€ç»´æ ‡å‡†å¹³å‡åˆ†ï¼ˆé›·è¾¾å›¾ï¼‰</div>
        <canvas id="standardRadar"></canvas>
    </div>

    <div class="card">
        <div class="section-title">ğŸ“ˆ æ€ç»´é˜¶æ®µè¶‹åŠ¿ï¼ˆæŠ˜çº¿å›¾ï¼‰</div>
        <canvas id="stageTrend"></canvas>
    </div>
</div>

<script>
/* ===========================================================
   å›¾è¡¨ï¼šè®¡ç®—å‡½æ•°
=========================================================== */

// å…«è¦ç´ ç»ƒä¹ æ¬¡æ•°
function calcElementFrequency(logs) {
    const keys = ["ç›®çš„", "é—®é¢˜", "ä¿¡æ¯", "æ¦‚å¿µ", "æ¨è®º", "å‡è®¾", "è§†è§’", "åæœ"];
    return {
        labels: keys,
        data: keys.map(k => logs.filter(r => r.element === k).length)
    };
}

// ä¹æ ‡å‡†å¹³å‡åˆ†
function calcStandardScores(logs) {
    const keys = ["æ¸…æ™°", "å‡†ç¡®", "ç²¾ç¡®", "ç›¸å…³", "æ·±åˆ»", "å¹¿åº¦", "é€»è¾‘", "é‡è¦æ€§", "å…¬æ­£"];
    return {
        labels: keys,
        data: keys.map(k => {
            const match = logs.filter(r => r.standard === k);
            if (!match.length) return 0;
            return match.reduce((a, b) => a + b.standardScore, 0) / match.length;
        })
    };
}

// æ€ç»´é˜¶æ®µè¶‹åŠ¿ï¼ˆ1æŒ£æ‰ / 2åˆå­¦ / 3ç»ƒä¹ ï¼‰
function calcStageTrend(logs) {
    logs = [...logs].sort((a, b) => new Date(a.date) - new Date(b.date));
    return {
        labels: logs.map(r => r.date),
        values: logs.map(r => {
            const sc = (r.standardScore + r.honestyScore) / 2;
            if (sc < 2) return 1;
            if (sc < 2.5) return 2;
            return 3;
        })
    };
}


/* ===========================================================
   å›¾è¡¨æ¸²æŸ“
=========================================================== */

let elementRadarChart, standardRadarChart, stageTrendChart;

function renderCharts(logs) {
    const elementData = calcElementFrequency(logs);
    const standardData = calcStandardScores(logs);
    const trend = calcStageTrend(logs);

    // é”€æ¯æ—§å›¾
    if (elementRadarChart) elementRadarChart.destroy();
    if (standardRadarChart) standardRadarChart.destroy();
    if (stageTrendChart) stageTrendChart.destroy();

    // å…«è¦ç´ é›·è¾¾å›¾
    elementRadarChart = new Chart(
        document.getElementById("elementRadar"),
        {
            type: 'radar',
            data: {
                labels: elementData.labels,
                datasets: [{
                    label: "ç»ƒä¹ æ¬¡æ•°",
                    data: elementData.data,
                    borderColor: "#22c55e",
                    backgroundColor: "rgba(34,197,94,0.2)"
                }]
            }
        }
    );

    // ä¹æ ‡å‡†é›·è¾¾å›¾
    standardRadarChart = new Chart(
        document.getElementById("standardRadar"),
        {
            type: 'radar',
            data: {
                labels: standardData.labels,
                datasets: [{
                    label: "å¹³å‡åˆ†",
                    data: standardData.data,
                    borderColor: "#3b82f6",
                    backgroundColor: "rgba(59,130,246,0.2)"
                }]
            }
        }
    );

    // é˜¶æ®µè¶‹åŠ¿æŠ˜çº¿å›¾
    stageTrendChart = new Chart(
        document.getElementById("stageTrend"),
        {
            type: 'line',
            data: {
                labels: trend.labels,
                datasets: [{
                    label: "é˜¶æ®µè¶‹åŠ¿ (1=æŒ£æ‰ / 2=åˆå­¦ / 3=ç»ƒä¹ )",
                    data: trend.values,
                    borderColor: "#f97316",
                    tension: 0.35,
                    pointRadius: 4
                }]
            },
            options: {
                scales: {
                    y: { min: 1, max: 3, ticks: { stepSize: 1 } }
                }
            }
        }
    );
}


/* ===========================================================
   å‘¨ç»Ÿè®¡ â†’ æ¸²æŸ“å›¾è¡¨
=========================================================== */

function showWeekly() {
    const logs = JSON.parse(localStorage.getItem("logs") || "[]");
    const now = Date.now();
    const oneWeek = 7 * 24 * 3600 * 1000;

    const weekLogs = logs.filter(r => now - new Date(r.date).getTime() < oneWeek);
    const el = document.getElementById("weeklyStats");

    if (!weekLogs.length) {
        el.innerText = "æœ¬å‘¨æš‚æ— è®°å½•ï¼Œå¿«å»æŠ½ä¸€å¼ å¡å§ï½";
        renderCharts(logs);
        return;
    }

    const avg = (arr, key) => arr.reduce((a,b)=>a+b[key],0) / arr.length;

    el.innerText =
        `æœ¬å‘¨ç»ƒä¹ æ¬¡æ•°ï¼š${weekLogs.length}\n` +
        `å¹³å‡æ ‡å‡†å¾—åˆ†ï¼š${avg(weekLogs,"standardScore").toFixed(2)}\n` +
        `å¹³å‡è¯šå®åº¦ï¼š${avg(weekLogs,"honestyScore").toFixed(2)}\n` +
        `è¦†ç›–è¦ç´ ï¼š${[...new Set(weekLogs.map(r=>r.element))].join("ï¼Œ")}\n` +
        `è¦†ç›–æ ‡å‡†ï¼š${[...new Set(weekLogs.map(r=>r.standard))].join("ï¼Œ")}`;

    // é‡æ–°æ¸²æŸ“å›¾è¡¨
    renderCharts(logs);
}
<script>
function toggleWeeklyReport(){
    const el = document.getElementById("weekly-report-content");
    const arrow = document.getElementById("weekly-arrow");
    const open = el.style.display === "block";

    el.style.display = open ? "none" : "block";
    arrow.style.transform = open ? "rotate(0deg)" : "rotate(180deg)";

    if (!open) generateWeeklyReport();
}
</script>

</script>

<!-- ===========================
     ğŸ¸ æ¯å‘¨æ€ç»´æˆé•¿æŠ¥å‘Šï¼ˆå¯æŠ˜å ï¼‰
     =========================== -->
<div class="container">
<div class="master-card" onclick="toggleWeeklyReport()" style="cursor:pointer;">

    <div class="master-header">
        <div class="master-icon">ğŸ“…</div>
        <div class="master-title">æ¯å‘¨æ€ç»´æˆé•¿æŠ¥å‘Šï¼ˆç‚¹å‡»å±•å¼€ï¼‰</div>
        <div class="master-arrow" id="weekly-arrow">â–¼</div>
    </div>

    <div id="weekly-report-content" class="master-content">

        <div id="weekly-report-box" style="
            background:rgba(255,255,255,0.7);
            padding:20px;
            border-radius:16px;
            box-shadow:0 4px 15px rgba(0,0,0,0.1);
            margin-top:16px;
            line-height:1.7;
        ">
            <!-- JS ä¼šè‡ªåŠ¨å¡«å…¥æŠ¥å‘Š -->
        </div>

    </div>
</div>
</div>
<!-- ===========================
     ğŸ¸ æ€ç»´æ˜Ÿå›¾å…¥å£
     =========================== -->
<div class="container">
  <div class="card">
      <div class="section-title">ğŸŒŒ æˆ‘çš„æ€ç»´æ˜Ÿå›¾</div>
      <p style="font-size:14px; color:#475569; line-height:1.6;">
          æŠŠä½ å†™ä¸‹çš„æ¯ä¸€æ¡å†…å®¹ï¼Œå˜æˆä¸€å¼ â€œæ€ç»´å®‡å®™åœ°å›¾â€ï¼š  
          é«˜é¢‘å…³é”®è¯ä¼šå˜æˆäº®èµ·æ¥çš„æ˜Ÿæ˜Ÿï¼Œè¿æ¥ä»£è¡¨å®ƒä»¬åœ¨ä½ æ€è€ƒä¸­å¸¸å¸¸ä¸€èµ·å‡ºç°ã€‚
      </p>
      <button onclick="window.location.href='mind-map.html'">
          è¿›å…¥æ€ç»´æ˜Ÿå›¾
      </button>
  </div>
</div>


<!-- ===========================
     ğŸ¸ äº”å¤§å¤§å¸ˆå¡ç‰‡ï¼ˆè›¤èŸ†ä¸»é¢˜ç‰ˆï¼‰
     =========================== -->

<!-- ===== å¤§å¸ˆå¡ç‰‡ 1ï¼šå¤„ç†å†²çª ===== -->
<div class="container">
<div class="master-card" onclick="toggleMasterBeautiful('conflict')">

    <div class="master-header">
        <div class="master-icon">ğŸ¸</div>
        <div class="master-title">å¤§å¸ˆç¤ºèŒƒï¼šå¦‚ä½•ä¼˜é›…å¤„ç†å†²çªï¼Ÿ</div>
        <div class="master-arrow" id="arrow-conflict">â–¼</div>
    </div>

    <div id="content-conflict" class="master-content">

        <div class="master-section">
            <div class="master-section-title">âœ¨ å¤§å¸ˆçš„é»„é‡‘åŸåˆ™</div>
            <div class="master-pill">å…ˆç†è§£ï¼Œå†å›åº”</div>
            <div class="master-pill">å†²çªæ˜¯éœ€æ±‚çš„ä¿¡å·ï¼Œè€Œéæˆ˜äº‰</div>
            <div class="master-pill">é—®é¢˜ä¸æ˜¯â€œè°é”™äº†â€ï¼Œè€Œæ˜¯â€œç°å®æ˜¯ä»€ä¹ˆâ€</div>
        </div>

        <div class="master-section">
            <div class="master-section-title">ğŸ“ å¤§å¸ˆå·¥å…·ç®±</div>
            <div class="master-grid">

                <div class="master-grid-item">
                    ğŸ¯ <b>æ˜ç¡®ç›®çš„</b><br>
                    æ˜¯ä¸ºäº†èµ¢ï¼Ÿè¿˜æ˜¯ä¸ºäº†ç†è§£ï¼Ÿ
                </div>

                <div class="master-grid-item">
                    â“ <b>å®šä¹‰é—®é¢˜</b><br>
                    æ˜¯éœ€æ±‚å†²çªï¼Ÿè¯¯è§£ï¼ŸæœŸå¾…ä¸ä¸€è‡´ï¼Ÿ
                </div>

                <div class="master-grid-item">
                    ğŸ‘“ <b>æ¢è§†è§’</b><br>
                    â€œå¦‚æœæˆ‘æ˜¯å¯¹æ–¹ï¼Œæˆ‘ä¼šæ€æ ·ç†è§£è¿™ä»¶äº‹ï¼Ÿâ€
                </div>

                <div class="master-grid-item">
                    ğŸ§© <b>æ‰¾å‡è®¾</b><br>
                    æˆ‘æ˜¯ä¸æ˜¯è¯¯ä¼šäº†å¯¹æ–¹æ„å›¾ï¼Ÿ
                </div>

                <div class="master-grid-item">
                    ğŸ§  <b>ä¹æ ‡å‡†æ£€æŸ¥</b><br>
                    æˆ‘æœ‰åè§å—ï¼Ÿæˆ‘å¿½ç•¥é‡è¦ä¿¡æ¯äº†å—ï¼Ÿ
                </div>

            </div>
        </div>

        <div class="master-section">
            <div class="master-section-title">ğŸ” å¤§å¸ˆå¤„ç†æµç¨‹</div>

            <div class="master-step">
                <span>â‘ </span> ç¡®è®¤å¯¹æ–¹æƒ…ç»ªï¼šâ€œæˆ‘å¬èµ·æ¥ä½ æœ‰äº›ç„¦è™‘â€¦å¯¹å—ï¼Ÿâ€
            </div>

            <div class="master-step">
                <span>â‘¡</span> ç¡®è®¤éœ€æ±‚ï¼šâ€œä½ éœ€è¦æ›´æ˜ç¡®çš„è¯´æ˜å’ŒæœŸå¾…ï¼Ÿâ€
            </div>

            <div class="master-step">
                <span>â‘¢</span> è¡¨è¾¾è‡ªå·±éœ€æ±‚ï¼šâ€œæˆ‘æƒ³äº†è§£ä½ åœ¨æ„çš„ç‚¹ã€‚â€
            </div>

            <div class="master-step">
                <span>â‘£</span> ä¸€èµ·æ‰¾æ–¹æ¡ˆï¼šâ€œæˆ‘ä»¬èƒ½å¦æ‰¾ä¸€ä¸ªåŒæ–¹éƒ½èƒ½æ¥å—çš„è·¯å¾„ï¼Ÿâ€
            </div>
        </div>

        <div class="master-summary">
            ğŸŒˆ <b>å¤§å¸ˆæ€»ç»“ï¼š</b><br>
            å†²çªä¸æ˜¯è¾“èµ¢ï¼Œè€Œæ˜¯ï¼š  
            **çœ‹è§çœŸå® â†’ å¯¹é½éœ€æ±‚ â†’ ä¸€èµ·è®©ç°å®å˜å¥½ã€‚**
        </div>

    </div>
</div>
</div>

<!-- ===== å¤§å¸ˆå¡ç‰‡ 2ï¼šçœ‹æƒ…ç»ª ===== -->
<div class="container">
<div class="master-card" onclick="toggleMasterBeautiful('emotion')">

    <div class="master-header">
        <div class="master-icon">ğŸ¸</div>
        <div class="master-title">å¤§å¸ˆç¤ºèŒƒï¼šå¦‚ä½•ç†è§£æƒ…ç»ªï¼Ÿ</div>
        <div class="master-arrow" id="arrow-emotion">â–¼</div>
    </div>

    <div id="content-emotion" class="master-content">

        <div class="master-section">
            <div class="master-section-title">âœ¨ å¤§å¸ˆçš„é»„é‡‘åŸåˆ™</div>
            <div class="master-pill">æƒ…ç»ªä¸æ˜¯æ•Œäººï¼Œæ˜¯ä¿¡å·</div>
            <div class="master-pill">æƒ…ç»ª = ä¿¡æ¯ Ã— è§£é‡Š</div>
            <div class="master-pill">è®©æƒ…ç»ªæç¤ºæ€ç»´ï¼Œè€Œä¸æ˜¯ä¸»å¯¼æ€ç»´</div>
        </div>

        <div class="master-section">
            <div class="master-section-title">ğŸ“ æƒ…ç»ªçš„ç»“æ„</div>
            <div class="master-grid">

                <div class="master-grid-item">
                    ğŸ¯ åˆºæ¿€  
                    â€œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿâ€
                </div>

                <div class="master-grid-item">
                    ğŸ§© è‡ªåŠ¨æƒ³æ³•  
                    â€œæˆ‘æ€ä¹ˆè§£é‡Šå®ƒï¼Ÿâ€
                </div>

                <div class="master-grid-item">
                    â¤ï¸ éœ€è¦  
                    â€œä»€ä¹ˆéœ€æ±‚è¢«è§¦å‘ï¼Ÿâ€
                </div>

                <div class="master-grid-item">
                    ğŸ‘“ é‡æ–°è§£è¯»  
                    â€œå¦‚æœæˆ‘ä¸æ˜¯è¿™æ ·è§£é‡Šï¼Œä¼šæ€æ ·ï¼Ÿâ€
                </div>

            </div>
        </div>

        <div class="master-section">
            <div class="master-section-title">ğŸ” å¤§å¸ˆå¦‚ä½•å¤„ç†æƒ…ç»ª</div>
            <div class="master-step">
                <span>â‘ </span> è§‰å¯Ÿæƒ…ç»ªï¼šâ€œæˆ‘ç°åœ¨åœ¨ç”Ÿæ°”/ç„¦è™‘/éš¾è¿‡ã€‚â€
            </div>
            <div class="master-step">
                <span>â‘¡</span> æ‰¾è‡ªåŠ¨æƒ³æ³•ï¼šâ€œä¸ºä»€ä¹ˆï¼Ÿæˆ‘åœ¨æƒ³ä»€ä¹ˆï¼Ÿâ€
            </div>
            <div class="master-step">
                <span>â‘¢</span> æ£€æŸ¥è§£é‡Šæ˜¯å¦å‡†ç¡®ã€‚
            </div>
            <div class="master-step">
                <span>â‘£</span> æ‰¾åˆ°æ ¸å¿ƒéœ€æ±‚ï¼Œå¹¶æ»¡è¶³å®ƒã€‚
            </div>
        </div>

        <div class="master-summary">
            ğŸŒˆ <b>å¤§å¸ˆæ€»ç»“ï¼š</b><br>
            å¤§å¸ˆä¸æ˜¯æ²¡æœ‰æƒ…ç»ªï¼Œ  
            è€Œæ˜¯ï¼š**èƒ½çœ‹æ‡‚æƒ…ç»ªåœ¨è¯´ä»€ä¹ˆã€‚**
        </div>

    </div>
</div>
</div>


<!-- ===== å¤§å¸ˆå¡ç‰‡ 3ï¼šåšé‡è¦å†³å®š ===== -->
<div class="container">
<div class="master-card" onclick="toggleMasterBeautiful('decision')">

    <div class="master-header">
        <div class="master-icon">ğŸ¸</div>
        <div class="master-title">å¤§å¸ˆç¤ºèŒƒï¼šå¦‚ä½•åšé‡è¦å†³å®šï¼Ÿ</div>
        <div class="master-arrow" id="arrow-decision">â–¼</div>
    </div>

    <div id="content-decision" class="master-content">

        <div class="master-section">
            <div class="master-section-title">âœ¨ å¤§å¸ˆçš„é»„é‡‘åŸåˆ™</div>
            <div class="master-pill">ç›®çš„å¿…é¡»æ¸…æ™°</div>
            <div class="master-pill">å¤§å†³å®š = å¤šå­é—®é¢˜æ„æˆ</div>
            <div class="master-pill">ä¸åšçš„ä»£ä»·ä¹Ÿè¦ç®—</div>
        </div>

        <div class="master-section">
            <div class="master-section-title">ğŸ“ å†³ç­–å·¥å…·ç®±</div>

            <div class="master-grid">

                <div class="master-grid-item">
                    ğŸ¯ <b>ç›®çš„</b><br>
                    â€œæˆ‘çœŸæ­£è¦å®ç°çš„æ˜¯ä»€ä¹ˆï¼Ÿâ€
                </div>

                <div class="master-grid-item">
                    â“ <b>æ ¸å¿ƒé—®é¢˜</b><br>
                    æˆ‘æŠŠé—®é¢˜æ‹†å¼€äº†å—ï¼Ÿ
                </div>

                <div class="master-grid-item">
                    ğŸ“š <b>ä¿¡æ¯</b><br>
                    å·²çŸ¥ vs æœªçŸ¥ vs ä¸çŸ¥é“è‡ªå·±ä¸çŸ¥é“çš„
                </div>

                <div class="master-grid-item">
                    ğŸ§© <b>å‡è®¾</b><br>
                    â€œå¦‚æœæˆ‘é”™äº†ï¼Œä¼šæ€æ ·ï¼Ÿâ€
                </div>

                <div class="master-grid-item">
                    ğŸ‘“ <b>è§†è§’</b><br>
                    æœªæ¥äº”å¹´çš„è‡ªå·±æ€ä¹ˆçœ‹ï¼Ÿ
                </div>

            </div>
        </div>

        <div class="master-summary">
            ğŸŒˆ <b>å¤§å¸ˆæ€»ç»“ï¼š</b><br>
            é‡è¦å†³å®šä¸æ˜¯é€‰â€œæœ€å¥½çš„â€ï¼Œ  
            è€Œæ˜¯é€‰ï¼š**æœªæ¥æœ€ä¸åæ‚”çš„ã€‚**
        </div>

    </div>
</div>
</div>


<!-- ===== å¤§å¸ˆå¡ç‰‡ 4ï¼šåˆ¤æ–­ä¿¡æ¯çœŸå‡ ===== -->
<div class="container">
<div class="master-card" onclick="toggleMasterBeautiful('truth')">

    <div class="master-header">
        <div class="master-icon">ğŸ¸</div>
        <div class="master-title">å¤§å¸ˆç¤ºèŒƒï¼šå¦‚ä½•åˆ¤æ–­ä¿¡æ¯çœŸå‡ï¼Ÿ</div>
        <div class="master-arrow" id="arrow-truth">â–¼</div>
    </div>

    <div id="content-truth" class="master-content">

        <div class="master-section">
            <div class="master-section-title">âœ¨ å¤§å¸ˆçš„é»„é‡‘åŸåˆ™</div>
            <div class="master-pill">å¯»æ‰¾â€œçœŸç›¸â€ï¼Œè€Œéâ€œè‡ªæˆ‘è‚¯å®šâ€</div>
            <div class="master-pill">ä¸»åŠ¨æ‰¾åè¯</div>
            <div class="master-pill">è¯æ®æ¯”è§‚ç‚¹æ›´é‡è¦</div>
        </div>

        <div class="master-section">
            <div class="master-grid">

                <div class="master-grid-item">
                    ğŸ“š <b>æ¥æºå¯é ï¼Ÿ</b>
                </div>

                <div class="master-grid-item">
                    ğŸ§  <b>è¯æ®å……åˆ†ï¼Ÿ</b>
                </div>

                <div class="master-grid-item">
                    ğŸ”— <b>é€»è¾‘ä¸€è‡´ï¼Ÿ</b>
                </div>

                <div class="master-grid-item">
                    â“ <b>èƒ½å¦è¢«è¯ä¼ªï¼Ÿ</b>
                </div>

            </div>
        </div>

        <div class="master-summary">
            ğŸŒˆ <b>å¤§å¸ˆæ€»ç»“ï¼š</b><br>
            å¤§å¸ˆä¸æ˜¯æ›´èªæ˜ï¼Œ  
            è€Œæ˜¯ï¼š**æ›´æ„¿æ„æ£€éªŒè‡ªå·±çš„ä¿¡å¿µã€‚**
        </div>

    </div>
</div>
</div>


<!-- ===== å¤§å¸ˆå¡ç‰‡ 5ï¼šå¦‚ä½•å­¦ä¹  ===== -->
<div class="container">
<div class="master-card" onclick="toggleMasterBeautiful('learning')">

    <div class="master-header">
        <div class="master-icon">ğŸ¸</div>
        <div class="master-title">å¤§å¸ˆç¤ºèŒƒï¼šå¦‚ä½•å­¦ä¹ ï¼Ÿ</div>
        <div class="master-arrow" id="arrow-learning">â–¼</div>
    </div>

    <div id="content-learning" class="master-content">

        <div class="master-section">
            <div class="master-section-title">âœ¨ å¤§å¸ˆçš„é»„é‡‘åŸåˆ™</div>
            <div class="master-pill">ç†è§£ç»“æ„èƒœè¿‡æ­»è®°ç¡¬èƒŒ</div>
            <div class="master-pill">æ‰¾å…³é”®æ¦‚å¿µã€å…³é”®å˜é‡</div>
            <div class="master-pill">æŠŠçŸ¥è¯†â€œåº”ç”¨â€åˆ°ç”Ÿæ´»</div>
        </div>

        <div class="master-section">
            <div class="master-grid">

                <div class="master-grid-item">
                    ğŸ¯ <b>å­¦ä¹ ç›®çš„</b><br>
                    ä¸ºäº†æ”¹å˜æ€ç»´æ–¹å¼ï¼Œè€Œä¸æ˜¯è®°ä½æ®µè½ã€‚
                </div>

                <div class="master-grid-item">
                    ğŸ“š <b>çŸ¥è¯†ç»“æ„</b><br>
                    æŠ“ä½æœ¬è´¨ã€åŸç†ã€æ¨¡å‹ã€‚
                </div>

                <div class="master-grid-item">
                    ğŸ§© <b>å‡è®¾æ£€æŸ¥</b><br>
                    â€œæˆ‘ä»¥ä¸ºæˆ‘æ‡‚äº†ï¼Œä½†çœŸçš„æ‡‚äº†å—ï¼Ÿâ€
                </div>

                <div class="master-grid-item">
                    ğŸ‘“ <b>è§†è§’è½¬æ¢</b><br>
                    æ–°çŸ¥è¯†ä¸äººç”Ÿç›®æ ‡çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ
                </div>

            </div>
        </div>

        <div class="master-summary">
            ğŸŒˆ <b>å¤§å¸ˆæ€»ç»“ï¼š</b><br>
            å¤§å¸ˆçš„å­¦ä¹ ç§˜è¯€ï¼š  
            **ç†è§£ç»“æ„ â†’ åº”ç”¨ â†’ å†ç†è§£ â†’ å†åº”ç”¨ã€‚**
        </div>

    </div>
</div>
</div>

<!-- ======== æŠ˜å  JS ======== -->
<script>
function toggleMasterBeautiful(id){
    const content = document.getElementById("content-"+id);
    const arrow = document.getElementById("arrow-"+id);
    const open = content.style.display === "block";

    content.style.display = open ? "none" : "block";
    arrow.style.transform = open ? "rotate(0deg)" : "rotate(180deg)";
}
</script>
<script>
/* ========== æŠ½å¡æ•°æ® ========== */

// å…ƒç´ å¡
const elementCards = [
    {key:"ç›®çš„", text:"ã€ç›®çš„å¡ã€‘ä½ çš„çœŸæ­£ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿè¡¨é¢ç›®çš„æ˜¯ï¼Ÿ"},
    {key:"é—®é¢˜", text:"ã€é—®é¢˜å¡ã€‘æŠŠä½ çº ç»“çš„ä¸€ä»¶äº‹ï¼Œæ”¹å†™æˆä¸€ä¸ªæ¸…æ™°çš„é—®é¢˜å¥ã€‚"},
    {key:"ä¿¡æ¯", text:"ã€ä¿¡æ¯å¡ã€‘å†™å‡ºè¯¥é—®é¢˜ï¼š3 ä¸ªäº‹å® ï¼‹ 3 ä¸ªçŒœæµ‹ã€‚"},
    {key:"æ¦‚å¿µ", text:"ã€æ¦‚å¿µå¡ã€‘é€‰ä¸€ä¸ªæŠ½è±¡è¯ï¼Œå¦‚è‡ªç”±/å®‰å…¨/æˆå°±ï¼Œå†™ä¸‹ä½ çš„å®šä¹‰ã€‚"},
    {key:"æ¨è®º", text:"ã€æ¨è®ºå¡ã€‘å†™ä¸€ä¸ªä½ çš„ç»“è®ºï¼Œå¹¶åˆ—å‡º 2â€“3 æ¡ç†ç”±ã€‚"},
    {key:"å‡è®¾", text:"ã€å‡è®¾å¡ã€‘ä½ åœ¨å“ªäº›ç‚¹ä¸Šâ€œæƒ³å½“ç„¶â€ï¼Ÿå¦‚æœè¿™äº›æ˜¯é”™çš„å‘¢ï¼Ÿ"},
    {key:"è§†è§’", text:"ã€è§†è§’å¡ã€‘ä»ä¸ä½ ç«‹åœºç›¸åçš„è§’åº¦ï¼Œå†™ 2 å¥è¯ã€‚"},
    {key:"åæœ", text:"ã€åæœå¡ã€‘å†™å‡ºä½ ä¸€ä¸ªå†³å®šçš„çŸ­æœŸåæœ + é•¿æœŸåæœã€‚"}
];

// æ ‡å‡†å¡
const standardCards = [
    {key:"æ¸…æ™°", text:"ã€æ¸…æ™°å¡ã€‘ä½ çš„è¡¨è¾¾æ˜¯å¦è®©é™Œç”Ÿäººèƒ½ç†è§£ï¼Ÿ"},
    {key:"å‡†ç¡®", text:"ã€å‡†ç¡®å¡ã€‘å“ªäº›å†…å®¹æœ‰äº‹å®æ”¯æŒï¼Ÿå“ªäº›å¯èƒ½é”™è¯¯ï¼Ÿ"},
    {key:"ç²¾ç¡®", text:"ã€ç²¾ç¡®å¡ã€‘æ˜¯å¦å¯ä»¥æ›´å…·ä½“ã€å¯éªŒè¯ï¼Ÿ"},
    {key:"ç›¸å…³", text:"ã€ç›¸å…³å¡ã€‘æ¯ä¸€å¥è¯éƒ½è§£å†³æ ¸å¿ƒé—®é¢˜äº†å—ï¼Ÿ"},
    {key:"æ·±åˆ»", text:"ã€æ·±åˆ»å¡ã€‘ä½ æ˜¯å¦è§¦åŠæ›´æ·±å±‚åŸå› ï¼Ÿ"},
    {key:"å¹¿åº¦", text:"ã€å¹¿åº¦å¡ã€‘ä»åæ–¹çœ‹ï¼Œä¼šæœ‰ä»€ä¹ˆæ–°å‘ç°ï¼Ÿ"},
    {key:"é€»è¾‘", text:"ã€é€»è¾‘å¡ã€‘ä½ çš„ç†ç”±ä¸ç»“è®ºä¹‹é—´è¿è´¯å—ï¼Ÿ"},
    {key:"é‡è¦æ€§", text:"ã€é‡è¦æ€§å¡ã€‘ä½ æ˜¯å¦å…³æ³¨å…³é”®ç‚¹ï¼Ÿ"},
    {key:"å…¬æ­£", text:"ã€å…¬æ­£å¡ã€‘ä½ æ˜¯å¦å…¬å¹³å¯¹è‡ªå·±ä¸ä»–äººï¼Ÿ"},
];


/* ========== æŠ½å¡å‡½æ•°ï¼ˆä½ ç¼ºå°‘çš„æ ¸å¿ƒéƒ¨åˆ†ï¼‰ ========== */
function drawElementCard() {
    const card = elementCards[Math.floor(Math.random()*elementCards.length)];
    document.getElementById("elementCard").innerText = card.text;
    localStorage.setItem("today_element", JSON.stringify(card));
}

function drawStandardCard() {
    const card = standardCards[Math.floor(Math.random()*standardCards.length)];
    document.getElementById("standardCard").innerText = card.text;
    localStorage.setItem("today_standard", JSON.stringify(card));
}


/* ========== ç§¯åˆ† & ç­‰çº§ç³»ç»Ÿ ========== */

// ç­‰çº§åŒºé—´
const LEVELS = [
    { level: 1, name: "æ€ç»´èŒèŠ½ Seedling", min: 0, max: 99, percentile: 20 },
    { level: 2, name: "æ€ç»´è§‚å¯Ÿè€… Observer", min: 100, max: 249, percentile: 35 },
    { level: 3, name: "æ€ç»´æ¢ç´¢è€… Explorer", min: 250, max: 499, percentile: 50 },
    { level: 4, name: "æ€ç»´å®è·µè€… Practitioner", min: 500, max: 899, percentile: 70 },
    { level: 5, name: "æ€ç»´ç­–å£« Strategist", min: 900, max: 1499, percentile: 85 },
    { level: 6, name: "æ€ç»´é©¾é©­è€… Navigator", min: 1500, max: 2499, percentile: 95 },
    { level: 7, name: "æ€ç»´å¤§å¸ˆ Master", min: 2500, max: 999999, percentile: 99 }
];

// æ¯æ—¥ç§¯åˆ†
function calculateEXP(record){
    return (record.standardScore + record.honestyScore) * 5;
}

// æ€»ç§¯åˆ†
function getTotalEXP(logs){
    return logs.reduce((sum, r)=> sum + calculateEXP(r), 0);
}

function getLevel(total){
    return LEVELS.find(lv => total>=lv.min && total<=lv.max);
}

function getNextEXP(level){
    return level.level===7 ? level.max : LEVELS[level.level].min;
}


/* ========== ä¿å­˜è®°å½• ========== */
function saveToday(){
    const element = JSON.parse(localStorage.getItem("today_element"));
    const standard = JSON.parse(localStorage.getItem("today_standard"));

    if(!element || !standard){
        alert("è¯·å…ˆæŠ½å…ƒç´ å¡å’Œæ ‡å‡†å¡ï¼");
        return;
    }

    const text = document.getElementById("elementAnswer").value.trim();

    const record = {
        date: new Date().toISOString().slice(0,10),
        element: element.key,
        standard: standard.key,
        text: text,
        standardScore: parseInt(document.getElementById("standardScore").value),
        honestyScore: parseInt(document.getElementById("honestyScore").value)
    };

    let logs = JSON.parse(localStorage.getItem("logs") || "[]");
    logs.push(record);
    localStorage.setItem("logs", JSON.stringify(logs));

    alert("å·²ä¿å­˜ï¼");
    updateLevelUI();
}


/* ========== ç­‰çº§ UI æ›´æ–° ========== */
function updateLevelUI(){
    const logs = JSON.parse(localStorage.getItem("logs") || "[]");

    const total = getTotalEXP(logs);
    const level = getLevel(total);
    const next = getNextEXP(level);
    const percent = Math.min((total - level.min) / (next - level.min), 1) * 100;

    document.getElementById("level-title").innerText = `ç­‰çº§ Lv.${level.level}ï¼š${level.name}`;
    document.getElementById("level-exp-text").innerText = `ç§¯åˆ†ï¼š${total} / ${next}`;
    document.getElementById("progress-bar").style.width = percent + "%";
    document.getElementById("percentile-text").innerText =
        `ä½ è¶…è¿‡äº†å…¨çƒ ${level.percentile}% çš„äººç±»`;
}

updateLevelUI();
</script>
</body>
</html>
